{% extends 'bookkepping/base.html' %}
{% block title %}Accounts - Bookkeeping System{% endblock %}

{% block content %}
<h2>📋 Chart of Accounts</h2>

<div class="stats">
  <div class="stat-card">
    <h3>{{ accounts|length }}</h3>
    <p>Total Accounts</p>
  </div>
  <div class="stat-card">
    <h3>{% for account in accounts %}{% if account.type == 'asset' %}{{ account.balance|floatformat:2 }}{% endif %}{% endfor %}</h3>
    <p>Total Assets</p>
  </div>
  <div class="stat-card">
    <h3>{% for account in accounts %}{% if account.type == 'liability' %}{{ account.balance|floatformat:2 }}{% endif %}{% endfor %}</h3>
    <p>Total Liabilities</p>
  </div>
</div>

<div style="overflow-x: auto;">
  <table>
    <thead>
      <tr>
        <th>Account Name</th>
        <th>Type</th>
        <th>Balance</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      {% for account in accounts %}
      <tr>
        <td>
          <strong>{{ account.name }}</strong>
        </td>
        <td>
          <span class="badge badge-{{ account.type }}">
            {% if account.type == 'asset' %}🏦{% elif account.type == 'liability' %}📋{% elif account.type == 'equity' %}👤{% elif account.type == 'income' %}💰{% else %}💸{% endif %}
            {{ account.type|title }}
          </span>
        </td>
        <td>
          <span class="balance {% if account.balance >= 0 %}positive{% else %}negative{% endif %}">
            ${{ account.balance|floatformat:2 }}
          </span>
        </td>
        <td>
          <a href="{% url 'bookkeeping:transaction_new' %}" class="btn">Add Transaction</a>
        </td>
      </tr>
      {% empty %}
      <tr>
        <td colspan="4" style="text-align: center; padding: 40px; color: #7f8c8d;">
          <p>No accounts found. <a href="/admin/bookkepping/account/add/" class="btn">Create your first account</a></p>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>

<style>
.badge {
  padding: 4px 12px;
  border-radius: 20px;
  font-size: 12px;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.badge-asset { background: linear-gradient(45deg, #27ae60, #2ecc71); color: white; }
.badge-liability { background: linear-gradient(45deg, #e74c3c, #c0392b); color: white; }
.badge-equity { background: linear-gradient(45deg, #9b59b6, #8e44ad); color: white; }
.badge-income { background: linear-gradient(45deg, #f39c12, #e67e22); color: white; }
.badge-expense { background: linear-gradient(45deg, #34495e, #2c3e50); color: white; }

.balance {
  font-weight: 600;
  font-size: 16px;
}

.balance.positive { color: #27ae60; }
.balance.negative { color: #e74c3c; }
</style>
{% endblock %}